(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[211],{9096:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/client-users",function(){return t(7659)}])},2018:function(e,s,t){"use strict";var n=t(5893);t(7294),s.Z=()=>(0,n.jsx)("div",{className:"d-flex justify-content-center",children:(0,n.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,n.jsx)("span",{className:"sr-only",children:"Loading..."})})})},7659:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var n=t(5893);t(5221);var a=t(765),i=t(6426),r=t(8995),l=t(5585),c=t(2920),o=t(7066),d=t(1664),h=t.n(d),m=t(9008),u=t.n(m);t(9755);var x=t(7294),j=t(1163),p=t.n(j),v=t(2018);t(129);var g=t(662),N=t(4379);function f(){let[e,s]=(0,x.useState)([]),[t,d]=(0,x.useState)(!1),[m,j]=(0,x.useState)(!1),[f,b]=(0,x.useState)([]),[y,A]=(0,x.useState)([]),[w,S]=(0,x.useState)([]),[k,C]=(0,x.useState)(""),[E,Z]=(0,x.useState)("");function _(e,t,n){let a={headers:{authorization:sessionStorage.getItem("ANATOKEN")}};o.Z.post("https://api.trap2win.com/admin/client-user-list",{status:e,role:t,full_name:n,client:sessionStorage.getItem("ANAID")},a).then(e=>{var t;s(e.data.result),d(!1),console.log(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.result,"RESPONSE")},e=>{401==e.response.status&&(p().push("/"),I("Unauthorized access"))})}async function O(e){e.preventDefault(),d(!0),_(e.target.active.value,e.target.user.value)}function I(e){c.Am.error(e,{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}return(0,x.useEffect)(()=>{d(!0),_(),function(){let e={headers:{authorization:sessionStorage.getItem("ANATOKEN")}};o.Z.post("https://api.trap2win.com/admin/projects-list",{user:sessionStorage.getItem("ANAID")},e).then(e=>{var s;b(null===(s=e.data)||void 0===s?void 0:s.result),d(!1)},e=>{401==e.response.status&&(p().push("/"),I("Unauthorized access"))})}(),"client-user"===sessionStorage.getItem("ANAROLE")&&p().push("/client-dashboard")},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u(),{children:[(0,n.jsx)("title",{children:"Users"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,n.jsx)("meta",{charSet:"UTF-8"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,n.jsx)("meta",{name:"msapplication-square70x70logo",content:"images/icon70.png"}),(0,n.jsx)("meta",{name:"msapplication-square150x150logo",content:"images/icon150.png"}),(0,n.jsx)("meta",{name:"msapplication-square310x310logo",content:"images/icon310.png"}),(0,n.jsx)("meta",{charSet:"utf-8"}),(0,n.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"}),(0,n.jsx)("meta",{name:"description",content:""}),(0,n.jsx)("meta",{name:"author",content:""}),(0,n.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i",rel:"stylesheet"})]}),(0,n.jsxs)("div",{className:"page-top",children:[(0,n.jsxs)("div",{id:"wrapper",children:[(0,n.jsx)(i.Z,{}),(0,n.jsxs)("div",{id:"content-wrapper",className:"d-flex flex-column",children:[(0,n.jsxs)("div",{id:"content",children:[(0,n.jsx)(r.Z,{}),t?(0,n.jsx)(v.Z,{}):"",(0,n.jsx)("div",{className:"container-fluid",children:(0,n.jsxs)("div",{className:"card shadow",children:[(0,n.jsx)("div",{className:"card-header py-3 d-flex flex-row align-items-center justify-content-between",children:(0,n.jsxs)("h6",{className:"m-0 font-weight-bold text-primary",children:["Users (Total records: ",null==e?void 0:e.length,")"]})}),(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("form",{onSubmit:e=>O(e),id:"search",children:(0,n.jsxs)("div",{className:"row ",children:[(0,n.jsx)("div",{className:"col-md-2",children:(0,n.jsx)("div",{className:"form-group",children:(0,n.jsx)("input",{type:"text",className:"form-control",name:"user",placeholder:"Filter by user name"})})}),(0,n.jsx)("div",{className:"col-md-2",children:(0,n.jsx)("div",{className:"form-group",children:(0,n.jsxs)("select",{name:"active",className:"form-control",children:[(0,n.jsx)("option",{value:"",children:"All status"}),(0,n.jsx)("option",{value:0,children:"Active"}),(0,n.jsx)("option",{value:1,children:"Inactive"})]})})}),(0,n.jsx)("div",{className:"col-md-2",children:(0,n.jsx)("div",{className:"form-group",children:(0,n.jsxs)("button",{type:"submit",className:"btn btn-primary btn-block",children:[(0,n.jsx)("i",{className:"fas fa-search"})," Search"]})})}),(0,n.jsx)("div",{className:"col-md-2",children:(0,n.jsx)("div",{className:"form-group",children:(0,n.jsxs)("button",{type:"reset",className:"btn btn-primary btn-block",children:[(0,n.jsx)("i",{className:"fas fa-redo"})," Reset"]})})}),(0,n.jsx)("div",{className:"col-md-2",children:(0,n.jsx)("div",{className:"form-group",children:(0,n.jsx)(h(),{href:"/client-users/add",legacyBehavior:!0,children:(0,n.jsxs)("a",{className:"btn btn-primary btn-block",children:[(0,n.jsx)("i",{className:"fas fa-plus"})," Add user"," "]})})})})]})}),(0,n.jsxs)("table",{id:"tableUser",className:"table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"thead-light",children:[(0,n.jsx)("th",{children:"#"}),(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"Email/Mobile"}),(0,n.jsx)("th",{children:"Address"}),(0,n.jsx)("th",{children:"Access Given"}),(0,n.jsx)("th",{children:"Action"})]})}),(0,n.jsx)("tbody",{children:(null==e?void 0:e.length)==0?(0,n.jsx)("tr",{children:(0,n.jsxs)("td",{colSpan:"5",className:"text-center",children:[" ","No record found"]})}):null==e?void 0:e.map((e,s)=>{let{_id:t,full_name:a,category:i,email:r,mobile:l,active:c,role:o,address:d}=e;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:s+1}),(0,n.jsx)("td",{children:a}),(0,n.jsxs)("td",{children:[r,(0,n.jsx)("br",{}),l]}),(0,n.jsx)("td",{children:d}),(0,n.jsxs)("td",{children:[i.map((e,s)=>{var t;return(0,n.jsxs)("div",{children:[(0,n.jsx)("b",{children:" Project :- "})," ",null==e?void 0:null===(t=e.project)||void 0===t?void 0:t.name,", ",(0,n.jsx)("b",{children:" Category :- "}),"  ",e.name]},s)}),(null==i?void 0:i.length)===0&&(0,n.jsx)("p",{children:"No access given"})]}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ml-1",onClick:()=>{j(!0),C(t)},children:(0,n.jsx)("i",{class:"fas fa-file"})})})]},t)})})]})]}),(0,n.jsxs)(g.Z,{show:m,onHide:e=>j(!1),children:[(0,n.jsx)(g.Z.Header,{closeButton:!0,children:(0,n.jsx)(g.Z.Title,{children:"Give Access"})}),(0,n.jsx)(g.Z.Body,{children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-6",children:(0,n.jsxs)("select",{name:"active",className:"form-control",onChange:e=>{(function(e){let s={headers:{authorization:sessionStorage.getItem("ANATOKEN")}};o.Z.post("https://api.trap2win.com/admin/log-category-list",{project:e},s).then(e=>{A(e.data.result),Z(!1)},e=>{401==e.response.status&&(p().push("/"),I("Unauthorized access"))})})(e.target.value),Z(!0)},children:[(0,n.jsx)("option",{value:"",children:"All Projects"}),null==f?void 0:f.map(e=>(0,n.jsx)("option",{value:null==e?void 0:e._id,children:e.name}))]})}),(0,n.jsx)("div",{className:"col-6",children:(0,n.jsx)("button",{className:"btn btn-primary btn-block",onClick:function(){if(confirm("Want to give access?")){let e={headers:{authorization:sessionStorage.getItem("ANATOKEN")}};o.Z.post("https://api.trap2win.com/admin/update-client-user-category ",{id:k,category:w},e).then(e=>{if("error"==e.data.status)I(e.data.message);else{var s;s=e.data.message,c.Am.success(s,{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),_(),j(!1)}},e=>{401==e.response.status&&(p().push("/"),this.notify_error("Unauthorized access"))})}},children:"Give Access"})})]}),(0,n.jsxs)("div",{className:"my-3",children:[(0,n.jsx)("table",{id:"tableUser",className:"table",children:(0,n.jsxs)(N.CheckboxGroup,{onChange:e=>{var s,t=[];for(s=0;s<e.length;s++)!0==e[s].checked&&t.push(e[s].value);S(t)},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"thead-light",children:[(0,n.jsx)("th",{children:(0,n.jsx)(N.AllCheckerCheckbox,{})}),(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"description"})]})}),(0,n.jsx)("tbody",{children:(null==y?void 0:y.length)==0?(0,n.jsx)("tr",{children:(0,n.jsxs)("td",{colSpan:"5",className:"text-center",children:[" ","No record found"]})}):null==y?void 0:y.map((e,s)=>{let{_id:t,name:a,description:i}=e;return(0,n.jsxs)("tr",{children:[(0,n.jsxs)("td",{children:[" ",(0,n.jsx)(N.Checkbox,{value:t})]}),(0,n.jsx)("td",{children:a}),(0,n.jsx)("td",{children:i})]},t)})})]})}),E?(0,n.jsx)(v.Z,{}):""]})]})})]})]})})]}),(0,n.jsx)(l.Z,{})]})]}),(0,n.jsx)(a.Z,{})]})]})}},4654:function(){}},function(e){e.O(0,[571,437,66,662,129,379,370,774,888,179],function(){return e(e.s=9096)}),_N_E=e.O()}]);