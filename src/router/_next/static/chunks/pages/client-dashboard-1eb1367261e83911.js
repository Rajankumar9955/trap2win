(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[664],{8188:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/client-dashboard",function(){return a(972)}])},972:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return g}});var t=a(5893);a(5221);var i=a(765),r=a(6426),d=a(8995),n=a(5585),l=a(2920),o=a(7066);a(1664);var c=a(9008),h=a.n(c);a(9755);var u=a(7294),m=a(1163),v=a.n(m),j=a(9217),x=a(6775),p=a(8598);function g(){let[e,s]=(0,u.useState)([]),[a,c]=(0,u.useState)([]),[m,j]=(0,u.useState)([]),[x,g]=(0,u.useState)([]),[N,b]=(0,u.useState)("customer"),[f,F]=(0,u.useState)({}),[y,C]=(0,u.useState)({}),[_,A]=(0,u.useState)({}),[E,w]=(0,u.useState)([]);function B(e,s,a){let t={headers:{authorization:sessionStorage.getItem("ANATOKEN")}};o.Z.post("https://api.trap2win.com/admin/active-client",{user:sessionStorage.getItem("ANAID"),category:e,start_date:s,end_date:a},t).then(e=>{if("success"==e.data.status){var s,a=[];a.push(null===(s=e.data)||void 0===s?void 0:s.uniqueValues);var t=[],i=[];for(let s=0;s<e.data.last_seven_days.length;s++)i.push(e.data.last_seven_days[s].count),t.push(e.data.last_seven_days[s]._id.date);A({labels:t,datasets:[{label:"Active Users",data:a,backgroundColor:"#4e73df",borderColor:"rgba(0,20,71,1)"},{label:"Last 7 Days",data:i,backgroundColor:"#701C9A",borderColor:"#891C9A"}]})}else S(e.data.message)},e=>{401==e.response.status&&(v().push("/"),this.notify_error("Unauthorized access"))})}function D(e,a,t){let i={headers:{authorization:sessionStorage.getItem("ANATOKEN")}};o.Z.post("https://api.trap2win.com/admin/user-visit-client",{user:sessionStorage.getItem("ANAID"),category:e,start_date:a,end_date:t},i).then(e=>{if("success"==e.data.status){var a,t,i;s(null===(a=e.data)||void 0===a?void 0:a.website),c(null===(t=e.data)||void 0===t?void 0:t.android),j(null===(i=e.data)||void 0===i?void 0:i.ios)}else S(e.data.message)},e=>{401==e.response.status&&(v().push("/"),this.notify_error("Unauthorized access"))}),o.Z.post("https://api.trap2win.com/admin/city-log-client",{user:sessionStorage.getItem("ANAID"),category:e,start_date:a,end_date:t},i).then(e=>{if("success"==e.data.status){g(null===(s=e.data)||void 0===s?void 0:s.result);for(var s,a,t,i,r,d,n,l=[],o=[],c=0;c<(null===(a=e.data)||void 0===a?void 0:null===(t=a.result)||void 0===t?void 0:t.length);c++)l.push((null===(i=e.data.result[c])||void 0===i?void 0:i.city)+", "+(null===(r=e.data.result[c])||void 0===r?void 0:r.state)+", "+(null===(d=e.data.result[c])||void 0===d?void 0:d.country)),o.push(null===(n=e.data.result[c])||void 0===n?void 0:n.quantity);F({labels:l,datasets:[{label:"Region",data:o,backgroundColor:["#4e73df","#1cc88a","#36b9cc","#EC7063","#A569BD","#AEB6BF","#A9CCE3","#F9E79F","#566573","#FF6633","#FFB399","#FF33FF","#FFFF99","#00B3E6","#E6B333","#3366E6","#999966","#99FF99","#B34D4D","#80B300","#809900","#E6B3B3","#6680B3","#66991A","#FF99E6","#CCFF1A","#FF1A66","#E6331A","#33FFCC","#66994D","#B366CC","#4D8000","#B33300","#CC80CC","#66664D","#991AFF","#E666FF","#4DB3FF","#1AB399","#E666B3","#33991A","#CC9999","#B3B31A","#00E680","#4D8066","#809980","#E6FF80","#1AFF33","#999933","#FF3380","#CCCC00","#66E64D","#4D80CC","#9900B3","#E64D66","#4DB380","#FF4D4D","#99E6E6","#6666FF"],hoverBackgroundColor:["#2e59d9","#17a673","#2c9faf","#EC7063","#A569BD","#AEB6BF","#A9CCE3","#F9E79F","#566573"],hoverBorderColor:"rgba(234, 236, 244, 1)"}]})}else S(e.data.message)},e=>{401==e.response.status&&(v().push("/"),this.notify_error("Unauthorized access"))}),o.Z.post("https://api.trap2win.com/admin/order-client",{user:sessionStorage.getItem("ANAID"),category:e,start_date:a,end_date:t},i).then(e=>{if("success"==e.data.status){var s=[],a=[];for(let t=0;t<e.data.result.length;t++)a.push(e.data.result[t].count),s.push(e.data.result[t]._id.date);C({labels:s,datasets:[{label:"Number of orders",data:a,lineTension:.3,backgroundColor:"#4e73df",borderColor:"rgba(0,20,71,1)",pointRadius:3,pointBackgroundColor:"#4e73df",pointBorderColor:"rgba(0,20,71,1)",pointHoverRadius:3,pointHoverBackgroundColor:"#4e73df",pointHoverBorderColor:"rgba(0,20,71,1)",pointHitRadius:10,pointBorderWidth:2}]})}else S(e.data.message)},e=>{401==e.response.status&&(v().push("/"),this.notify_error("Unauthorized access"))})}function S(e){l.Am.error(e,{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}return(0,u.useEffect)(()=>{D(),function(){let e={headers:{authorization:sessionStorage.getItem("ANATOKEN")}};o.Z.post("https://api.trap2win.com/admin/fetch-client-user-category",{id:sessionStorage.getItem("ANAID")},e).then(e=>{w(e.data.result)},e=>{401==e.response.status&&(v().push("/"),S("Unauthorized access"))})}()},[]),(0,u.useEffect)(()=>{B()},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(h(),{children:[(0,t.jsx)("title",{children:"Dashboard"}),(0,t.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,t.jsx)("meta",{charSet:"UTF-8"}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,t.jsx)("meta",{name:"msapplication-square70x70logo",content:"images/icon70.png"}),(0,t.jsx)("meta",{name:"msapplication-square150x150logo",content:"images/icon150.png"}),(0,t.jsx)("meta",{name:"msapplication-square310x310logo",content:"images/icon310.png"}),(0,t.jsx)("meta",{charSet:"utf-8"}),(0,t.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"}),(0,t.jsx)("meta",{name:"description",content:""}),(0,t.jsx)("meta",{name:"author",content:""}),(0,t.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i",rel:"stylesheet"})]}),(0,t.jsxs)("div",{className:"page-top",children:[(0,t.jsxs)("div",{id:"wrapper",children:[(0,t.jsx)(r.Z,{}),(0,t.jsxs)("div",{id:"content-wrapper",className:"d-flex flex-column",children:[(0,t.jsxs)("div",{id:"content",children:[(0,t.jsx)(d.Z,{}),(0,t.jsxs)("div",{className:"container-fluid mb-5",children:[(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"card shadow mb-5",children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("h5",{className:"col-lg-3",children:"Daily Report"})})}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsx)("form",{onSubmit:e=>{e.preventDefault(),B(e.target.project.value,e.target.start_date.value,e.target.end_date.value),D(e.target.project.value,e.target.start_date.value,e.target.end_date.value)},id:"search",children:(0,t.jsxs)("div",{className:"row ",children:[(0,t.jsx)("div",{className:"col-md-3",children:(0,t.jsx)("div",{className:"form-group",children:(0,t.jsxs)("select",{name:"project",className:"form-control",children:[(0,t.jsx)("option",{value:"",children:"Project"}),null==E?void 0:E.map(e=>(0,t.jsx)("option",{value:e._id,children:e.name},e._id))]})})}),(0,t.jsx)("div",{className:"col-md-3",children:(0,t.jsx)("div",{className:"form-group",children:(0,t.jsx)("input",{type:"date",className:"form-control",name:"start_date",placeholder:"Filter by start date"})})}),(0,t.jsx)("div",{className:"col-md-3",children:(0,t.jsx)("div",{className:"form-group",children:(0,t.jsx)("input",{type:"date",className:"form-control",name:"end_date",placeholder:"Filter by end date"})})}),(0,t.jsx)("div",{className:"col-md-3",children:(0,t.jsx)("div",{className:"form-group",children:(0,t.jsxs)("button",{type:"submit",className:"btn btn-primary btn-block",children:[(0,t.jsx)("i",{className:"fas fa-search"})," Search"]})})}),(0,t.jsx)("div",{className:"col-md-3",children:(0,t.jsx)("div",{className:"form-group",children:(0,t.jsxs)("button",{type:"reset",className:"btn btn-primary btn-block",children:[(0,t.jsx)("i",{className:"fas fa-redo"})," Reset"]})})})]})})})]})}),(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-12",children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:"Active User"}),(0,t.jsx)("div",{className:"card-body",children:0===Object.keys(_).length?"":(0,t.jsx)(p.x1,{data:_,options:{scales:{x:{beginAtZero:!0},y:{beginAtZero:!0}}}})})]})}),(0,t.jsx)("div",{className:"col-6 mt-5",children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:"Region"}),(0,t.jsx)("div",{className:"card-body",children:0===Object.keys(f).length?"":(0,t.jsx)(p.$I,{data:f,options:{maintainAspectRatio:!0}})})]})}),(0,t.jsx)("div",{className:"col-6 mt-5",children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:"What Pages does your user visits ? For Website"}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsxs)("table",{className:"w-100 table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Page"}),(0,t.jsx)("th",{children:"Page View"})]})}),(0,t.jsx)("tbody",{children:e&&(null==e?void 0:e.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsxs)("th",{children:[null==e?void 0:e.page_name," "]}),(0,t.jsx)("td",{children:null==e?void 0:e.quantity})]},s)))})]})})]})}),(0,t.jsx)("div",{className:"col-6 mt-5",children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:"What Pages does your user visits ? For Android"}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsxs)("table",{className:"w-100 table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Page"}),(0,t.jsx)("th",{children:"Page View"})]})}),(0,t.jsx)("tbody",{children:a&&(null==a?void 0:a.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsxs)("th",{children:[null==e?void 0:e.page_name," "]}),(0,t.jsx)("td",{children:null==e?void 0:e.quantity})]},s)))})]})})]})}),(0,t.jsx)("div",{className:"col-6 mt-5",children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:"What Pages does your user visits ? For IOS"}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsxs)("table",{className:"w-100 table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Page"}),(0,t.jsx)("th",{children:"Page View"})]})}),(0,t.jsx)("tbody",{children:m&&(null==m?void 0:m.map((e,s)=>(0,t.jsxs)("tr",{children:[(0,t.jsxs)("th",{children:[null==e?void 0:e.page_name," "]}),(0,t.jsx)("td",{children:null==e?void 0:e.quantity})]},s)))})]})})]})}),(0,t.jsx)("div",{className:"col-12 mt-5",children:(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:"Order Placed"}),(0,t.jsx)("div",{className:"card-body",children:0===Object.keys(y).length?"":(0,t.jsx)(p.$Q,{data:y,options:{maintainAspectRatio:!0}})})]})})]})})]})]}),(0,t.jsx)(n.Z,{})]})]}),(0,t.jsx)(i.Z,{})]})]})}j.Z.register(x.uw)}},function(e){e.O(0,[571,757,437,66,319,370,774,888,179],function(){return e(e.s=8188)}),_N_E=e.O()}]);