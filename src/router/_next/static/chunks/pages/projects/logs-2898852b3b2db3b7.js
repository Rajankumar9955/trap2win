(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[111],{184:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects/logs",function(){return s(6276)}])},2018:function(e,t,s){"use strict";var a=s(5893);s(7294),t.Z=()=>(0,a.jsx)("div",{className:"d-flex justify-content-center",children:(0,a.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,a.jsx)("span",{className:"sr-only",children:"Loading..."})})})},6276:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var a=s(5893);s(5221);var i=s(765),n=s(6426),r=s(8995),l=s(5585),o=s(2920),c=s(7066),d=s(1664),h=s.n(d),m=s(9008),u=s.n(m);s(9755);var x=s(7294),j=s(1163),p=s.n(j),v=s(2018),g=s(381),f=s.n(g),N=s(8447);function b(){var e,t,s,d,m,j;let[g,b]=(0,x.useState)([]),[y,w]=(0,x.useState)(!1),[S,_]=(0,x.useState)(""),[k,C]=(0,x.useState)(30),[P,E]=(0,x.useState)(1),[A,T]=(0,x.useState)(0),[O,Z]=(0,x.useState)(""),[I,D]=(0,x.useState)(""),[L,U]=(0,x.useState)(""),[q,F]=(0,x.useState)("");function R(e,t,s,a,i){let n={headers:{authorization:sessionStorage.getItem("ANATOKEN")}},r=new URLSearchParams(window.location.search);_(r.get("project")),c.Z.post("https://api.trap2win.com/admin/log-list",{page:k*(e-1),limit:k,project:r.get("project"),log_category:r.get("category"),source:t,type:s,start_date:a,end_date:i},n).then(e=>{var t;b(e.data.result),w(!1),T(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.count)},e=>{401==e.response.status&&(p().push("/"),o.Am.error("Unauthorized access",{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}))})}return(0,x.useEffect)(()=>{w(!0),R(P),"client-user"===sessionStorage.getItem("ANAROLE")&&p().push("/client-dashboard")},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u(),{children:[(0,a.jsxs)("title",{children:[null===(e=g[0])||void 0===e?void 0:null===(t=e.log_category)||void 0===t?void 0:t.name," Logs"]}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,a.jsx)("meta",{charSet:"UTF-8"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,a.jsx)("meta",{name:"msapplication-square70x70logo",content:"images/icon70.png"}),(0,a.jsx)("meta",{name:"msapplication-square150x150logo",content:"images/icon150.png"}),(0,a.jsx)("meta",{name:"msapplication-square310x310logo",content:"images/icon310.png"}),(0,a.jsx)("meta",{charSet:"utf-8"}),(0,a.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"}),(0,a.jsx)("meta",{name:"description",content:""}),(0,a.jsx)("meta",{name:"author",content:""}),(0,a.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i",rel:"stylesheet"})]}),(0,a.jsxs)("div",{className:"page-top",children:[(0,a.jsxs)("div",{id:"wrapper",children:[(0,a.jsx)(n.Z,{}),(0,a.jsxs)("div",{id:"content-wrapper",className:"d-flex flex-column",children:[(0,a.jsxs)("div",{id:"content",children:[(0,a.jsx)(r.Z,{}),y?(0,a.jsx)(v.Z,{}):"",(0,a.jsx)("div",{className:"container-fluid",children:(0,a.jsxs)("div",{className:"card shadow",children:[(0,a.jsx)("div",{className:"card-header py-3 d-flex flex-row align-items-center justify-content-between",children:(0,a.jsxs)("h6",{className:"m-0 font-weight-bold text-primary",children:[(0,a.jsx)(h(),{href:"/projects/project-category?project="+S,legacyBehavior:!0,children:(0,a.jsx)("a",{className:"btn btn-primary btn-sm text-white mr-2",children:(0,a.jsx)("i",{className:"fas fa-arrow-left"})})})," ",null===(s=g[0])||void 0===s?void 0:null===(d=s.log_category)||void 0===d?void 0:d.name,"  Logs (Total records: ",A,") for Project ( ",null===(m=g[0])||void 0===m?void 0:null===(j=m.project)||void 0===j?void 0:j.name," )"]})}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),R(1,e.target.source.value,e.target.purpose.value,e.target.start_date.value,e.target.end_date.value),E(1),D(e.target.purpose.value),Z(e.target.source.value),U(e.target.start_date.value),F(e.target.end_date.value)},id:"search",children:(0,a.jsxs)("div",{className:"row ",children:[(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"form-group",children:(0,a.jsxs)("select",{name:"source",className:"form-control",children:[(0,a.jsx)("option",{value:"",children:"Source"}),(0,a.jsx)("option",{value:"website",children:"Website"}),(0,a.jsx)("option",{value:"android",children:"Android"}),(0,a.jsx)("option",{value:"ios",children:"IOS"})]})})}),(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"form-group",children:(0,a.jsxs)("select",{name:"purpose",className:"form-control",children:[(0,a.jsx)("option",{value:"",children:"Purpose"}),(0,a.jsx)("option",{value:"page visit",children:"Page Visit"}),(0,a.jsx)("option",{value:"add to cart",children:"Add to cart"}),(0,a.jsx)("option",{value:"checkout",children:"Checkout"}),(0,a.jsx)("option",{value:"login",children:"login"}),(0,a.jsx)("option",{value:"registration",children:"Registration ( Website )"}),(0,a.jsx)("option",{value:"signup",children:"Signup ( Android )"})]})})}),(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)("input",{type:"date",className:"form-control",name:"start_date",placeholder:"Filter by start date"})})}),(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)("input",{type:"date",className:"form-control",name:"end_date",placeholder:"Filter by end date"})})}),(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"form-group",children:(0,a.jsxs)("button",{type:"submit",className:"btn btn-primary btn-block",children:[(0,a.jsx)("i",{className:"fas fa-search"})," Search"]})})}),(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"form-group",children:(0,a.jsxs)("button",{type:"reset",className:"btn btn-primary btn-block",children:[(0,a.jsx)("i",{className:"fas fa-redo"})," Reset"]})})})]})}),(0,a.jsxs)("table",{id:"tableUser",className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"thead-light",children:[(0,a.jsx)("th",{children:"Date"}),(0,a.jsx)("th",{children:"Type"}),(0,a.jsx)("th",{children:"Source"}),(0,a.jsx)("th",{children:"State/City"}),(0,a.jsx)("th",{children:"Event"}),(0,a.jsx)("th",{children:"Event Data"}),(0,a.jsx)("th",{children:"Order Id"})]})}),(0,a.jsx)("tbody",{children:(null==g?void 0:g.length)==0?(0,a.jsx)("tr",{children:(0,a.jsxs)("td",{colSpan:"5",className:"text-center",children:[" ","No record found"]})}):null==g?void 0:g.map((e,t)=>{let{_id:s,createdAt:i,type:n,source:r,state:l,page_name:o,city:c,event:d,event_data:h,order_id:m}=e;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:f()(i).format("DD-MMM-YYYY, hh:mm A")}),(0,a.jsxs)("td",{children:[n,(0,a.jsx)("br",{}),o]}),(0,a.jsx)("td",{children:r}),(0,a.jsxs)("td",{children:[(0,a.jsx)("b",{children:"State :- "}),l,(0,a.jsx)("br",{}),(0,a.jsx)("b",{children:"City:- "}),c]}),(0,a.jsx)("td",{children:d}),(0,a.jsx)("td",{children:h}),(0,a.jsx)("td",{children:m})]},s)})})]}),A>k?(0,a.jsx)(N.Z,{prevPageText:"prev",nextPageText:"next",firstPageText:"first",lastPageText:"last",activePage:P,itemsCountPerPage:k,totalItemsCount:A,onChange:function(e){E(e),R(e,O,I,L,q)},itemClass:"page-item mt-5",linkClass:"page-link",innerClass:"pagination justify-content-center"}):""]})]})})]}),(0,a.jsx)(l.Z,{})]})]}),(0,a.jsx)(i.Z,{})]})]})}}},function(e){e.O(0,[571,885,437,66,447,370,774,888,179],function(){return e(e.s=184)}),_N_E=e.O()}]);