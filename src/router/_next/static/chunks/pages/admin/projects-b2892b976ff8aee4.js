(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{9138:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/projects",function(){return t(6521)}])},2018:function(e,s,t){"use strict";var a=t(5893);t(7294),s.Z=()=>(0,a.jsx)("div",{className:"d-flex justify-content-center",children:(0,a.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,a.jsx)("span",{className:"sr-only",children:"Loading..."})})})},6521:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var a=t(5893);t(5221);var n=t(765),r=t(6426),i=t(8995),l=t(5585),o=t(2920),c=t(7066);t(1664);var d=t(9008),m=t.n(d);t(9755);var h=t(7294),u=t(1163),j=t.n(u),p=t(2018),x=t(662);function f(){let[e,s]=(0,h.useState)([]),[t,d]=(0,h.useState)([]),[u,f]=(0,h.useState)(!1),[v,N]=(0,h.useState)(!1),[g,b]=(0,h.useState)(""),[y,w]=(0,h.useState)(""),[S,A]=(0,h.useState)("");function _(e){let t={headers:{authorization:sessionStorage.getItem("ANATOKEN")}};c.Z.post("https://api.trap2win.com/admin/projects-list",{name:e},t).then(e=>{s(e.data.result),f(!1)},e=>{401==e.response.status&&(j().push("/"),k("Unauthorized access"))})}function k(e){o.Am.error(e,{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}return(0,h.useEffect)(()=>{f(!0),_(),function(){let e={headers:{authorization:sessionStorage.getItem("ANATOKEN")}};c.Z.post("https://api.trap2win.com/admin/user-list",{role:"customer"},e).then(e=>{var s;d(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.result),f(!1)},e=>{401==e.response.status&&(j().push("/"),k("Unauthorized access"))})}(""),"admin"!=sessionStorage.getItem("ANAROLE")&&j().push("/projects"),"client-user"===sessionStorage.getItem("ANAROLE")&&j().push("/client-projects")},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(m(),{children:[(0,a.jsx)("title",{children:"Projects"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,a.jsx)("meta",{charSet:"UTF-8"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,a.jsx)("meta",{name:"msapplication-square70x70logo",content:"images/icon70.png"}),(0,a.jsx)("meta",{name:"msapplication-square150x150logo",content:"images/icon150.png"}),(0,a.jsx)("meta",{name:"msapplication-square310x310logo",content:"images/icon310.png"}),(0,a.jsx)("meta",{charSet:"utf-8"}),(0,a.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"}),(0,a.jsx)("meta",{name:"description",content:""}),(0,a.jsx)("meta",{name:"author",content:""}),(0,a.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i",rel:"stylesheet"})]}),(0,a.jsxs)("div",{className:"page-top",children:[(0,a.jsxs)("div",{id:"wrapper",children:[(0,a.jsx)(r.Z,{}),(0,a.jsxs)("div",{id:"content-wrapper",className:"d-flex flex-column",children:[(0,a.jsxs)("div",{id:"content",children:[(0,a.jsx)(i.Z,{}),u?(0,a.jsx)(p.Z,{}):"",(0,a.jsxs)("div",{className:"container-fluid",children:[(0,a.jsxs)("div",{className:"card shadow",children:[(0,a.jsx)("div",{className:"card-header py-3 d-flex flex-row align-items-center justify-content-between",children:(0,a.jsxs)("h6",{className:"m-0 font-weight-bold text-primary",children:["Projects (Total records: ",null==e?void 0:e.length,")"]})}),(0,a.jsxs)("div",{className:"card-body",children:[(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),f(!0),_(e.target.project.value)},id:"search",children:(0,a.jsxs)("div",{className:"row ",children:[(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"form-group",children:(0,a.jsx)("input",{type:"text",className:"form-control",name:"project",placeholder:"Filter by project name"})})}),(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"form-group",children:(0,a.jsxs)("button",{type:"submit",className:"btn btn-primary btn-block",children:[(0,a.jsx)("i",{className:"fas fa-search"})," Search"]})})}),(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"form-group",children:(0,a.jsxs)("button",{type:"reset",className:"btn btn-primary btn-block",children:[(0,a.jsx)("i",{className:"fas fa-redo"})," Reset"]})})}),(0,a.jsx)("div",{className:"col-md-3",children:(0,a.jsx)("div",{className:"form-group",children:(0,a.jsxs)("button",{type:"button",className:"btn btn-primary btn-block",onClick:()=>N(!0),children:[(0,a.jsx)("i",{className:"fas fa-plus"})," Add Project"," "]})})})]})}),(0,a.jsxs)("table",{id:"tableUser",className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"thead-light",children:[(0,a.jsx)("th",{children:"#"}),(0,a.jsx)("th",{children:"User Details"}),(0,a.jsx)("th",{children:"Project Name"}),(0,a.jsx)("th",{children:"Description"}),(0,a.jsx)("th",{children:"Action"})]})}),(0,a.jsx)("tbody",{children:(null==e?void 0:e.length)==0?(0,a.jsx)("tr",{children:(0,a.jsxs)("td",{colSpan:"5",className:"text-center",children:[" ","No record found"]})}):null==e?void 0:e.map((e,s)=>{let{_id:t,name:n,user:r,description:i,active:l}=e;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:s+1}),(0,a.jsxs)("td",{children:[null==r?void 0:r.full_name,(0,a.jsx)("br",{}),null==r?void 0:r.email,(0,a.jsx)("br",{}),null==r?void 0:r.mobile]}),(0,a.jsx)("td",{children:n}),(0,a.jsx)("td",{children:i}),(0,a.jsx)("td",{children:(0,a.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ml-1",onClick:e=>j().push("/admin/projects/project-category?project="+t+"&user="+(null==r?void 0:r._id)),children:(0,a.jsx)("i",{className:"fas fa-eye"})})})]},t)})})]})]})]}),(0,a.jsxs)(x.Z,{show:v,onHide:e=>N(!1),children:[(0,a.jsx)(x.Z.Header,{closeButton:!0,children:(0,a.jsx)(x.Z.Title,{children:"Add Project"})}),(0,a.jsx)(x.Z.Body,{children:(0,a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),f(!0);let s={headers:{authorization:sessionStorage.getItem("ANATOKEN")}};c.Z.post("https://api.trap2win.com/admin/add-project",{name:y,description:S,user:g},s).then(e=>{if("error"==e.data.status)k(e.data.message),f(!1);else{var s;s=e.data.message,o.Am.success(s,{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),f(!1),N(!1),w(""),A(""),_()}},e=>{401==e.response.status&&(j().push("/"),this.notify_error("Unauthorized access"))})},children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"User"}),(0,a.jsxs)("select",{className:"form-control",onChange:e=>b(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Select User"}),null==t?void 0:t.map((e,s)=>(0,a.jsxs)("option",{value:null==e?void 0:e._id,children:[null==e?void 0:e.full_name,", ",null==e?void 0:e.mobile]},s))]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Name"}),(0,a.jsx)("input",{type:"text",value:y,required:!0,className:"form-control",onChange:e=>w(e.target.value)})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{children:"Description"}),(0,a.jsx)("textarea",{rows:4,type:"text",value:S,required:!0,className:"form-control",onChange:e=>A(e.target.value)})]}),(0,a.jsx)("div",{className:"form-group",children:(0,a.jsxs)("button",{type:"submit",className:"btn btn-primary btn-sm  btn-block mt-4",children:[(0,a.jsx)("i",{className:"fas fa-plus"})," Add"," "]})})]})})]})]})]}),(0,a.jsx)(l.Z,{})]})]}),(0,a.jsx)(n.Z,{})]})]})}}},function(e){e.O(0,[571,437,66,662,370,774,888,179],function(){return e(e.s=9138)}),_N_E=e.O()}]);