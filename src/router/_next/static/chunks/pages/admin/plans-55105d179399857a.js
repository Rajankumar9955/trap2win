(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[867],{8776:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/plans",function(){return t(2608)}])},2018:function(e,s,t){"use strict";var n=t(5893);t(7294),s.Z=()=>(0,n.jsx)("div",{className:"d-flex justify-content-center",children:(0,n.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,n.jsx)("span",{className:"sr-only",children:"Loading..."})})})},2608:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return b}});var n=t(5893);t(5221);var a=t(765),i=t(6426),r=t(8995),c=t(5585),l=t(2920),o=t(7066);t(1664);var d=t(9008),h=t.n(d);t(9755);var m=t(7294),u=t(1163),p=t.n(u),x=t(2018),j=t(129),f=t.n(j);function b(){let[e,s]=(0,m.useState)([]),[t,d]=(0,m.useState)(!1);function u(){let e={headers:{authorization:sessionStorage.getItem("ANATOKEN")}};o.Z.post("https://api.trap2win.com/admin/fetch-all-plan",{},e).then(e=>{s(e.data.result),d(!1)},e=>{401==e.response.status&&(p().push("/"),b("Unauthorized access"))})}function j(e){l.Am.success(e,{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}function b(e){l.Am.error(e,{position:"bottom-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}function g(e,s,t){e.preventDefault();let n={headers:{authorization:sessionStorage.getItem("ANATOKEN")}};o.Z.post("https://api.trap2win.com/admin/update-plan-status",f().stringify({id:s,status:t}),n).then(e=>{"success"==e.data.status?(j(e.data.message),u()):b(e.data.message)},e=>{401==e.response.status&&(p().push("/"),b("Unauthorized access"))})}async function N(e){if(confirm("Want to delete?")){let s={headers:{authorization:sessionStorage.getItem("ANATOKEN")}};o.Z.post("https://api.trap2win.com/admin/delete-plan?id="+e,{id:e},s).then(e=>{"error"==e.data.status?b(e.data.message):(j(e.data.message),u())},e=>{401==e.response.status&&(p().push("/"),this.notify_error("Unauthorized access"))})}}return(0,m.useEffect)(()=>{d(!0),u(),"admin"!=sessionStorage.getItem("ANAROLE")&&p().push("/dashboard"),"client-user"===sessionStorage.getItem("ANAROLE")&&p().push("/client-dashboard")},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(h(),{children:[(0,n.jsx)("title",{children:"Plans"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,n.jsx)("meta",{charSet:"UTF-8"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,n.jsx)("meta",{name:"msapplication-square70x70logo",content:"images/icon70.png"}),(0,n.jsx)("meta",{name:"msapplication-square150x150logo",content:"images/icon150.png"}),(0,n.jsx)("meta",{name:"msapplication-square310x310logo",content:"images/icon310.png"}),(0,n.jsx)("meta",{charSet:"utf-8"}),(0,n.jsx)("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"}),(0,n.jsx)("meta",{name:"description",content:""}),(0,n.jsx)("meta",{name:"author",content:""}),(0,n.jsx)("link",{href:"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i",rel:"stylesheet"})]}),(0,n.jsxs)("div",{className:"page-top",children:[(0,n.jsxs)("div",{id:"wrapper",children:[(0,n.jsx)(i.Z,{}),(0,n.jsxs)("div",{id:"content-wrapper",className:"d-flex flex-column",children:[(0,n.jsxs)("div",{id:"content",children:[(0,n.jsx)(r.Z,{}),t?(0,n.jsx)(x.Z,{}):"",(0,n.jsx)("div",{className:"container-fluid",children:(0,n.jsxs)("div",{className:"card shadow",children:[(0,n.jsx)("div",{className:"card-header py-3 d-flex flex-row align-items-center justify-content-between",children:(0,n.jsxs)("h6",{className:"m-0 font-weight-bold text-primary",children:["Plans (Total records: ",null==e?void 0:e.length,")"]})}),(0,n.jsxs)("div",{className:"card-body",children:[(0,n.jsx)("form",{onSubmit:e=>{e.preventDefault(),d(!0),u(e.target.project.value)},id:"search",children:(0,n.jsx)("div",{className:"row ",children:(0,n.jsx)("div",{className:"col-md-3",children:(0,n.jsx)("div",{className:"form-group",children:(0,n.jsxs)("button",{type:"button",className:"btn btn-primary btn-block",onClick:()=>p().push("/admin/plans/add"),children:[(0,n.jsx)("i",{className:"fas fa-plus"})," Add Plan"," "]})})})})}),(0,n.jsxs)("table",{id:"tableUser",className:"table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"thead-light",children:[(0,n.jsx)("th",{children:"#"}),(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"Price"}),(0,n.jsx)("th",{children:"Old Price"}),(0,n.jsx)("th",{children:"Validity"}),(0,n.jsx)("th",{children:"Project Limit"}),(0,n.jsx)("th",{children:"Status"}),(0,n.jsx)("th",{children:"Action"})]})}),(0,n.jsx)("tbody",{children:(null==e?void 0:e.length)==0?(0,n.jsx)("tr",{children:(0,n.jsxs)("td",{colSpan:"5",className:"text-center",children:[" ","No record found"]})}):null==e?void 0:e.map((e,s)=>{let{_id:t,name:a,description:i,active:r,price:c,old_price:l,validity_days:o,project_limit:d}=e;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:s+1}),(0,n.jsx)("td",{children:a}),(0,n.jsxs)("td",{children:["₹ ",c]}),(0,n.jsxs)("td",{children:["₹ ",l]}),(0,n.jsxs)("td",{children:[o," days"]}),(0,n.jsx)("td",{children:d}),(0,n.jsx)("td",{children:0===r?(0,n.jsx)("button",{id:t,onClick:e=>g(e,t,1),type:"button",className:"btn btn-success btn-circle btn-sm",children:(0,n.jsx)("i",{className:"far fa-thumbs-up"})}):(0,n.jsx)("button",{id:t,onClick:e=>g(e,t,0),type:"button",className:"btn btn-danger btn-circle btn-sm",children:(0,n.jsx)("i",{className:"far fa-thumbs-down"})})}),(0,n.jsxs)("td",{children:[(0,n.jsx)("button",{type:"button",className:"btn btn-primary btn-sm ml-1",onClick:e=>p().push("/admin/plans/edit?id="+t),children:(0,n.jsx)("i",{className:"fas fa-pencil-alt"})}),(0,n.jsx)("button",{type:"button",className:"btn btn-danger btn-sm ml-1",onClick:e=>N(t),children:(0,n.jsx)("i",{className:"fas fa-trash"})})]})]},t)})})]})]})]})})]}),(0,n.jsx)(c.Z,{})]})]}),(0,n.jsx)(a.Z,{})]})]})}},4654:function(){}},function(e){e.O(0,[571,437,66,129,370,774,888,179],function(){return e(e.s=8776)}),_N_E=e.O()}]);